# AWS 네트워크 구성요소 설명

## 1. VPC (Virtual Private Cloud)
- AWS 내에서 사용자가 정의하는 격리된 가상 네트워크 공간입니다.
- IP 주소 대역(예: 10.0.0.0/16)을 직접 지정하며, 서브넷, 라우팅, 보안 정책 등을 관리합니다.
- 여러 개의 서브넷(Private, Public)으로 나누어 리소스를 배치할 수 있습니다.
- VPC 내 리소스는 내부 통신뿐 아니라 라우팅 테이블과 게이트웨이를 통해 외부 인터넷과도 통신할 수 있습니다.

## 2. ENI (Elastic Network Interface)
- EC2, RDS, ELB 등 AWS 리소스에 연결되는 가상 네트워크 인터페이스입니다.
- VPC 내 서브넷에서 생성되며, 기본적으로 사설 IP를 할당받습니다.
- 필요에 따라 공인 IP도 할당할 수 있으며, 하나의 ENI에 여러 개의 사설 IP를 추가할 수 있습니다.
- ENI를 통해 리소스 간 네트워크 트래픽이 전달되며, 다중 ENI를 통해 네트워크 분리가 가능합니다.

## 3. Routing Table
- 서브넷 내 트래픽의 흐름을 결정하는 규칙 집합입니다.
- 각 서브넷은 하나의 라우팅 테이블에 연결되며, 라우팅 테이블은 여러 서브넷에서 공유할 수 있습니다.
- 기본적으로 VPC 내부 사설 IP 대역에 대해 ‘Local’ 경로가 포함되어 있습니다.
- 외부 인터넷 접근을 위해 ‘0.0.0.0/0’ 경로를 인터넷 게이트웨이 또는 NAT Gateway/Instance로 지정합니다.
- Public Subnet은 인터넷 게이트웨이를 통해 외부 통신이 가능하며, Private Subnet은 NAT Gateway/Instance를 통해 아웃바운드 인터넷 통신을 수행합니다.

## 4. Internet Gateway (IGW)
- VPC와 인터넷 간 통신을 중계하는 관리형 게이트웨이입니다.
- VPC에 한 개만 생성 및 연결할 수 있으며, 라우팅 테이블에 반드시 연결해야 합니다.
- IGW가 연결된 Public Subnet 내 리소스는 공인 IP를 통해 인터넷과 양방향 통신이 가능합니다.
- IGW 없이는 VPC 내 리소스가 인터넷에 접근하거나 인터넷에서 접근할 수 없습니다.

## 5. NAT Gateway
- Private Subnet에서 인터넷 아웃바운드 트래픽을 중계해 주는 관리형 서비스입니다.
- Public Subnet에 생성되며, 공인 IP를 가지고 있습니다.
- Private Subnet의 라우팅 테이블에 ‘0.0.0.0/0’ 경로를 NAT Gateway로 지정하여 인터넷 접속을 가능하게 합니다.
- AWS에서 관리하므로 유지보수가 필요 없고, 최대 45Gbps까지 자동 확장됩니다.
- CloudWatch와 연동해 모니터링이 가능합니다.
- 외부에서 NAT Gateway로 직접 접근은 불가능합니다.

## 6. NAT Instance
- NAT Gateway 대신 Public Subnet에 EC2 인스턴스를 NAT 용도로 사용합니다.
- 공인 IP를 가진 특수한 EC2 인스턴스이며, Private Subnet의 인터넷 아웃바운드 트래픽을 중계합니다.
- 라우팅 테이블에 ‘0.0.0.0/0’ 경로를 NAT Instance의 ENI로 지정합니다.
- SrcDestCheck 속성을 비활성화해야 NAT 기능이 제대로 작동합니다.
- 커뮤니티 AMI ‘ami-vpc-nat’ 같은 사전 설정된 이미지를 사용합니다.
- 사용자가 직접 인스턴스 운영, 보안 그룹 관리, 장애 대응(예: Failover 스크립트) 등을 해야 합니다.
- 인스턴스 타입에 따라 성능과 대역폭이 제한됩니다.

## 7. NAT Gateway vs NAT Instance 비교
| 구분           | NAT Gateway                         | NAT Instance                             |
|----------------|-----------------------------------|----------------------------------------|
| 관리           | AWS 관리 (유지보수 불필요)          | 사용자 직접 관리 필요                    |
| 장애 대응      | 자동 복구 및 확장                   | 직접 스크립트로 장애 대비해야 함         |
| 대역폭         | 최대 45Gbps 확장 가능               | 인스턴스 타입에 따라 다름                 |
| 보안 그룹      | 보안 그룹 설정 불가                 | 보안 그룹 설정 가능                      |
| 비용           | 상대적으로 비싸지만 관리 편리         | 상대적으로 저렴하지만 관리 비용 발생       |
| 모니터링       | CloudWatch 연동 가능                | CloudWatch 및 직접 모니터링 필요          |
| 인터넷 접근    | 외부에서 직접 접근 불가             | 외부에서 접근 불가                       |

- NAT Gateway 및 NAT Instance 모두 설정 후에도 인터넷 연결이 되지 않으면 NACL(Network ACL) 설정을 점검해야 합니다.

---

필요하면 바로 복사해서 `.md` 파일로 쓰시면 됩니다!  
더 다듬거나 추가 설명 원하면 말씀해 주세요.
